(this["webpackJsonpkage-editor"]=this["webpackJsonpkage-editor"]||[]).push([[0],{22:function(e){e.exports=JSON.parse("{}")},26:function(e,t,n){e.exports=n(49)},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),l=n(7),o=n.n(l),i=n(9),s=n(3),u=n(2),m=n(6),d=n(1),h=n(19),f=n(10),v=n(20),g=n.n(v)()("EDITOR"),p={selectSingle:g("SELECT_SINGLE"),selectAddSingle:g("SELECT_ADD_SINGLE"),selectRemoveSingle:g("SELECT_REMOVE_SINGLE"),selectNone:g("SELECT_NONE"),selectAll:g("SELECT_ALL"),selectPrev:g("SELECT_PREV"),selectNext:g("SELECT_NEXT"),startAreaSelect:g("AREA_SELECT_START"),startSelectionDrag:g("SELECTION_DRAG_START"),mouseMove:g("MOUSE_MOVE"),mouseUp:g("MOUSE_UP"),updateCTMInv:g("UPDATE_CTMINV")},S=function(e){var t=e.value.slice();return 99===t[0]&&(t[7]=e.partName||""),t.join(":")},b=new(n(21).Kage),O=null,E=function(e){var t;if(e===(null===(t=O)||void 0===t?void 0:t.glyph))return O.result;var n=e.map(S),a=b.makeGlyphSeparated(n);return O={glyph:e,result:a},a},j=new URLSearchParams(window.location.hash.slice(1)),y={glyph:(a=j.get("data")||"",a.split(/[$\r\n]+/).map((function(e){return function(e){for(var t=e.split(":"),n=function(e){switch(e){case 0:case 1:case 9:return 7;case 2:return 9;case 3:case 4:case 6:case 99:return 11;default:return 0}}(+t[0]),a=[],c=0;c<n;c++)a.push(Math.floor(+t[c]||0));return 99===a[0]?{value:a,partName:t[7]||""}:{value:a}}(e)})).filter((function(e){return 0!==(t=e).value.length&&(0!==t.value[0]||97===t.value[1]||98===t.value[1]||99===t.value[1]);var t}))),selection:[],areaSelectRect:null,dragSelection:null,ctmInv:null},M=Object(h.reducerWithInitialState)(y).case(p.selectSingle,(function(e,t){return Object(d.a)(Object(d.a)({},e),{},{selection:[t]})})).case(p.selectAddSingle,(function(e,t){return Object(d.a)(Object(d.a)({},e),{},{selection:e.selection.includes(t)?e.selection:e.selection.concat([t])})})).case(p.selectRemoveSingle,(function(e,t){return Object(d.a)(Object(d.a)({},e),{},{selection:e.selection.filter((function(e){return t!==e}))})})).case(p.selectAll,(function(e){return Object(d.a)(Object(d.a)({},e),{},{selection:e.glyph.map((function(e,t){return t}))})})).case(p.selectNone,(function(e){return Object(d.a)(Object(d.a)({},e),{},{selection:[]})})).case(p.selectPrev,(function(e){if(0===e.glyph.length)return Object(d.a)(Object(d.a)({},e),{},{selection:[]});var t=0===e.selection.length?0:Math.min.apply(Math,Object(m.a)(e.selection));return Object(d.a)(Object(d.a)({},e),{},{selection:[(t-1+e.glyph.length)%e.glyph.length]})})).case(p.selectNext,(function(e){if(0===e.glyph.length)return Object(d.a)(Object(d.a)({},e),{},{selection:[]});var t=0===e.selection.length?-1:Math.max.apply(Math,Object(m.a)(e.selection));return Object(d.a)(Object(d.a)({},e),{},{selection:[(t+1+e.glyph.length)%e.glyph.length]})})).case(p.startAreaSelect,(function(e,t){if(!e.ctmInv)return e;var n=e.ctmInv(t.clientX,t.clientY),a=Object(u.a)(n,2),c=a[0],r=a[1];return Object(d.a)(Object(d.a)({},e),{},{areaSelectRect:[c,r,c,r]})})).case(p.startSelectionDrag,(function(e,t){if(!e.ctmInv)return e;var n=e.ctmInv(t.clientX,t.clientY),a=Object(u.a)(n,2),c=a[0],r=a[1];return Object(d.a)(Object(d.a)({},e),{},{dragSelection:[c,r,c,r]})})).case(p.mouseMove,(function(e,t){if(!e.ctmInv)return e;if(e.areaSelectRect){var n=Object(u.a)(e.areaSelectRect,2),a=n[0],c=n[1],r=e.ctmInv(t.clientX,t.clientY),l=Object(u.a)(r,2),o=l[0],i=l[1];return Object(d.a)(Object(d.a)({},e),{},{areaSelectRect:[a,c,o,i]})}if(e.dragSelection){var s=Object(u.a)(e.dragSelection,2),m=s[0],h=s[1],f=e.ctmInv(t.clientX,t.clientY),v=Object(u.a)(f,2),g=v[0],p=v[1];return Object(d.a)(Object(d.a)({},e),{},{dragSelection:[m,h,g,p]})}return e})).case(p.mouseUp,(function(e,t){if(!e.ctmInv)return e;if(e.areaSelectRect){var n=Object(u.a)(e.areaSelectRect,2),a=n[0],c=n[1],r=e.ctmInv(t.clientX,t.clientY),l=Object(u.a)(r,2),o=l[0],i=l[1],s=function(e,t,n,a,c){for(var r=E(e),l=[],o=[[t,n],[t,c],[a,c],[a,n],[t,n]],i=0;i<r.length;i++){r[i].array.some((function(e){var t=e.array.map((function(e){return[e.x,e.y]}));return t.push(t[0]),Object(f.a)(o,t)||Object(f.a)(t,o)||Object(f.b)(o,t)}))&&l.push(i)}return l}(e.glyph,a,c,o,i),m=Array.from(new Set(e.selection.concat(s)));return Object(d.a)(Object(d.a)({},e),{},{selection:m,areaSelectRect:null})}if(e.dragSelection){var h=Object(u.a)(e.dragSelection,2),v=(h[0],h[1],e.ctmInv(t.clientX,t.clientY)),g=Object(u.a)(v,2),p=(g[0],g[1],S=e.glyph,e.selection,S);return Object(d.a)(Object(d.a)({},e),{},{glyph:p,dragSelection:null})}var S;return e})).case(p.updateCTMInv,(function(e,t){return Object(d.a)(Object(d.a)({},e),{},{ctmInv:t})})),w=Object(s.b)({editor:M}),D=(n(44),n(45),function(e){return r.a.createElement(r.a.Fragment,null,e.polygons.array.map((function(e,t){return r.a.createElement("polygon",{key:t,points:e.array.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n," ")})).join("")})})))}),k=(n(46),function(e){var t=E(e.glyph),n=e.selection,a=t.map((function(e,t){return t})).filter((function(e){return!n.includes(e)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("g",{className:"strokes-deselected"},a.map((function(n){return r.a.createElement("g",{key:n,onMouseDown:function(t){var a;return null===(a=e.handleMouseDownDeselectedStroke)||void 0===a?void 0:a.call(e,t,n)}},r.a.createElement(D,{polygons:t[n]}))}))),r.a.createElement("g",{className:"strokes-selected"},n.map((function(n){return r.a.createElement("g",{key:n,onMouseDown:function(t){var a;return null===(a=e.handleMouseDownSelectedStroke)||void 0===a?void 0:a.call(e,t,n)}},r.a.createElement(D,{polygons:t[n]}))}))))}),N=(n(47),function(e){if(!e.rect)return null;var t=Object(u.a)(e.rect,4),n=t[0],a=t[1],c=t[2],l=t[3];if(n>c){var o=n;n=c,c=o}if(a>l){var i=a;a=l,l=i}return r.a.createElement("rect",{className:"areaselect-rect",x:n,y:a,width:c-n,height:l-a})}),I=(n(48),function(e){var t=e.handleMouseMove,n=e.handleMouseUp;return Object(c.useEffect)((function(){return document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),function(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n)}}),[t,n]),r.a.createElement("div",{className:"glyph-area"},r.a.createElement("svg",{width:"100%",height:"100%",viewBox:"-20 -20 500 240",onMouseDownCapture:e.handleMouseDownCapture,onMouseDown:e.handleMouseDownBackground},r.a.createElement("rect",{x:"0",y:"0",width:"200",height:"200",className:"glyph-boundary"}),r.a.createElement("rect",{x:"12",y:"12",width:"176",height:"176",className:"glyph-guide"}),r.a.createElement(k,{glyph:e.glyph,selection:e.selection,handleMouseDownDeselectedStroke:e.handleMouseDownDeselectedStroke,handleMouseDownSelectedStroke:e.handleMouseDownSelectedStroke}),r.a.createElement(N,{rect:e.areaSelectRect})))}),T=Object(i.b)((function(e){return Object(d.a)({},e.editor)}),(function(e){return{handleMouseDownCapture:function(t){if(t.target instanceof SVGSVGElement){var n=t.target.getScreenCTM();if(n){var a=t.target.createSVGPoint();e(p.updateCTMInv((function(e,t){a.x=e,a.y=t;var c=a.matrixTransform(n.inverse());return[c.x,c.y]})))}}},handleMouseDownBackground:function(t){t.shiftKey||t.ctrlKey||e(p.selectNone()),e(p.startAreaSelect(t))},handleMouseDownDeselectedStroke:function(t,n){t.shiftKey||t.ctrlKey?e(p.selectAddSingle(n)):e(p.selectSingle(n)),e(p.startSelectionDrag(t)),t.stopPropagation()},handleMouseDownSelectedStroke:function(t,n){(t.shiftKey||t.ctrlKey)&&e(p.selectRemoveSingle(n)),e(p.startSelectionDrag(t)),t.stopPropagation()},handleMouseMove:function(t){e(p.mouseMove(t))},handleMouseUp:function(t){e(p.mouseUp(t))}}}))(I);var R=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(T,null),r.a.createElement("div",{className:"editor-controls"}),r.a.createElement("div",{className:"parts-list-area"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=n(14),A=n(51),C={ja:{translation:n(22)}},_=j.get("host"),x="ja";if(_)switch(_.split(".")[0]){case"en":x="en";break;case"ko":x="ko";break;case"zhs":x="zh-Hans";break;case"zht":x="zh-Hant"}L.a.use(A.a).init({resources:C,lng:x,returnObjects:!0,interpolation:{escapeValue:!1}});L.a;var U=Object(s.c)(w);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:U},r.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.f234bfa9.chunk.js.map